./esbmc-wrapper.py -p ../sv-benchmarks/c/properties/valid-memsafety.prp -s kinduction --arch 32 ../sv-benchmarks/c/ldv-memsafety/memleaks_test15-1.i


--------------------------------------------------------------------------------


Verifying with ESBMC
Command: ./esbmc --no-div-by-zero-check --force-malloc-success --state-hashing --no-align-check --k-step 2 --floatbv --unlimited-k-steps ../sv-benchmarks/c/ldv-memsafety/memleaks_test15-1.i --32 --witness-output memleaks_test15-1.i.graphml --memory-leak-check --no-assertions --incremental-bmc 
ESBMC version 6.8.0 64-bit x86_64 linux
Target: 32-bit little-endian x86_64-unknown-linux with esbmc libc
file ../sv-benchmarks/c/ldv-memsafety/memleaks_test15-1.i: Parsing
Converting
Generating GOTO Program
GOTO program creation time: 0.181s
GOTO program processing time: 0.002s
*** Checking base case, k = 1
Starting Bounded Model Checking
Symex completed in: 0.022s (276 assignments)
Slicing time: 0.002s (removed 107 assignments)
Generated 78 VCC(s), 70 remaining after simplification (169 assignments)
No solver specified; defaulting to Boolector
Encoding remaining VCC(s) using bit-vector/floating-point arithmetic
Encoding to solver time: 0.009s
Solving with solver Boolector 3.2.1
Encoding to solver time: 0.009s
Runtime decision procedure: 1.089s
Building error trace

Counterexample:

State 6 file memleaks_test15-1.i line 825 function entry_point thread 0
----------------------------------------------------
  intf->cur_altsetting = (unsigned int)(( struct ldv_usb_host_interface *)(&dynamic_3_array[0]))

State 7 file memleaks_test15-1.i line 825 function entry_point thread 0
----------------------------------------------------
  intf->cur_altsetting = (unsigned int)(( struct ldv_usb_host_interface *)(&dynamic_3_array[0]))

State 8 file memleaks_test15-1.i line 825 function entry_point thread 0
----------------------------------------------------
  intf->cur_altsetting = (unsigned int)(( struct ldv_usb_host_interface *)(&dynamic_3_array[0]))

State 9 file memleaks_test15-1.i line 825 function entry_point thread 0
----------------------------------------------------
  intf->cur_altsetting = (unsigned int)(( struct ldv_usb_host_interface *)(&dynamic_3_array[0]))

State 18 file memleaks_test15-1.i line 827 function entry_point thread 0
----------------------------------------------------
  intf->cur_altsetting->desc.bInterfaceProtocol = { 0, 0, 0, 0, 0, 0, 0, -121, 0, 0, 0, 0, 0, 0, 0, 0 }

State 21 file memleaks_test15-1.i line 828 function entry_point thread 0
----------------------------------------------------
  hdev->dev.parent = (unsigned int)(( struct ldv_device *)(( struct ldv_device { void * platform_data; void * driver_data;  struct ldv_device * parent; } *)((unsigned char *)(( struct ldv_usb_interface *)(&dynamic_2_array[0])) + 8)))

State 22 file memleaks_test15-1.i line 828 function entry_point thread 0
----------------------------------------------------
  hdev->dev.parent = (unsigned int)(( struct ldv_device *)(( struct ldv_device { void * platform_data; void * driver_data;  struct ldv_device * parent; } *)((unsigned char *)(( struct ldv_usb_interface *)(&dynamic_2_array[0])) + 8)))

State 23 file memleaks_test15-1.i line 828 function entry_point thread 0
----------------------------------------------------
  hdev->dev.parent = (unsigned int)(( struct ldv_device *)(( struct ldv_device { void * platform_data; void * driver_data;  struct ldv_device * parent; } *)((unsigned char *)(( struct ldv_usb_interface *)(&dynamic_2_array[0])) + 8)))

State 24 file memleaks_test15-1.i line 828 function entry_point thread 0
----------------------------------------------------
  hdev->dev.parent = (unsigned int)(( struct ldv_device *)(( struct ldv_device { void * platform_data; void * driver_data;  struct ldv_device * parent; } *)((unsigned char *)(( struct ldv_usb_interface *)(&dynamic_2_array[0])) + 8)))

State 27 file memleaks_test15-1.i line 780 function ldv_arvo_init_specials_unsafe thread 0
----------------------------------------------------
  __mptr = ( struct ldv_device *)1858010874

State 28 file memleaks_test15-1.i line 780 function ldv_arvo_init_specials_unsafe thread 0
----------------------------------------------------
  intf = &dynamic_2_array[0]

State 44 file memleaks_test15-1.i line 514 function ldv_nonpositive thread 0
----------------------------------------------------
  r = 1073741824 (01000000 00000000 00000000 00000000)

State 47 file memleaks_test15-1.i line 799 function lvd_arvo_remove_specials thread 0
----------------------------------------------------
  __mptr = ( struct ldv_device *)1858010874

State 48 file memleaks_test15-1.i line 799 function lvd_arvo_remove_specials thread 0
----------------------------------------------------
  intf = &dynamic_2_array[0]

State 60 file memleaks_test15-1.i line 804 function lvd_arvo_remove_specials thread 0
----------------------------------------------------
  arvo = ( struct ldv_arvo_device *)0

State 81 file memleaks_test15-1.i line 843 function main thread 0
----------------------------------------------------
Violated property:
  file memleaks_test15-1.i line 843 function main
  dereference failure: forgotten memory: dynamic_5_array


VERIFICATION FAILED

Bug found (k = 1)

../sv-benchmarks/c/ldv-memsafety/memleaks_test15-1.i:841:1: warning: return type of 'main' is not 'int' [-Wmain-return-type]
void main(void) {
^
../sv-benchmarks/c/ldv-memsafety/memleaks_test15-1.i:841:1: note: change return type to 'int'
void main(void) {
^~~~
int

FALSE_MEMTRACK
